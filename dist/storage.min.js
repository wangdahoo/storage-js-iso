/**
 * storage-js-iso - storage.js compatible with isomorphic apps.
 * @version v0.2.2
 * @link https://github.com/wangdahoo/storage-js-iso
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.$storage=e()}(this,function(){"use strict";var t={},e=function(e){return e in t?t[e]:null},r=function(e,r){return t[e]=r,!0},n=function(e){return e in t&&delete t[e]},o=function(){return t={},!0},i={getItem:e,setItem:r,removeItem:n,clear:o},u=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var u,f=t[Symbol.iterator]();!(n=(u=f.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&f.return&&f.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f={},a={addEvent:function(t,e){return void 0===f[t]&&(f[t]=[]),"function"==typeof e&&f[t].push(e),this},fireEvent:function(t,e){var r=f[t];if(r instanceof Array)for(var n=0;n<r.length;n++)if("function"==typeof r[n]){var o=t.split("::"),i=u(o,2),a=i[0],c=i[1],l={type:a,key:c,value:e};r[n](l)}return this},removeEvent:function(t,e){var r=f[t];if("string"==typeof t&&r instanceof Array)if("function"==typeof e){for(var n=0;n<r.length;n++)if(r[n]===e){f[t].splice(n,1);break}}else delete f[t];return this}},c=window,l="localStorage"in c&&c.localStorage?c.localStorage:i;(function(t){var e=t;if(e){var r="__"+Math.round(1e7*Math.random());try{t.setItem(r,r),t.removeItem(r)}catch(t){e=!1}}return e})(l)||(l=i);var v=function(t){return"storage::"+t};return{get:function(t){try{return JSON.parse(l.getItem(t))}catch(e){return l.getItem(t)}},set:function(t,e){try{l.setItem(t,JSON.stringify(e));var r=v(t);return a.fireEvent(r,this.get(t)),!0}catch(t){return!1}},remove:function(t){return l.removeItem(t)},clear:function(){return l.clear()},on:function(t,e){var r=v(t);a.addEvent(r,e)},off:function(t,e){var r=v(t);a.removeEvent(r,e)}}});